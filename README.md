# ğŸš€ Smooth Gateway - æµå¼ä¼˜åŒ–ç½‘å…³

ä¸€ä¸ªè½»é‡ã€é«˜æ•ˆçš„ Node.js API ç½‘å…³ï¼Œä¸“ä¸ºä¼˜åŒ–å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„æµå¼å“åº”è€Œè®¾è®¡ï¼Œæä¾›ä¸èˆ¬é¡ºæ»‘çš„â€œæ‰“å­—æœºâ€æ•ˆæœã€‚

ç›®å‰ä»…æ”¯æŒopenaiæ ¼å¼ï¼Œå»ºè®®çš„ä½¿ç”¨æ–¹æ³•æ˜¯å’ŒNew APIé¡¹ç›®é…åˆä½¿ç”¨ã€‚

## âœ¨ ç‰¹æ€§

- **ä¸æ»‘æµå¼ä½“éªŒ**: å°†ä¸Šæ¸¸ API ä¸ç¨³å®šçš„â€œå—çŠ¶â€è¾“å‡ºï¼Œæ™ºèƒ½è½¬æ¢ä¸ºå¹³æ»‘ã€è¿ç»­çš„å­—ç¬¦æµã€‚
- **åŠ¨æ€å»¶è¿Ÿ**: æ ¹æ®æ–‡æœ¬å—çš„é•¿åº¦è‡ªåŠ¨è°ƒæ•´â€œæ‰“å­—â€é€Ÿåº¦ï¼ŒçŸ­æ–‡æœ¬ä»å®¹ï¼Œé•¿æ–‡æœ¬é«˜æ•ˆã€‚
- **å®Œå…¨å¯é…ç½®**: æ‰€æœ‰ä¼˜åŒ–å‚æ•°ï¼ˆå»¶è¿Ÿã€é˜ˆå€¼ç­‰ï¼‰ã€ç«¯å£ã€ä¸Šæ¸¸åœ°å€å‡å¯é€šè¿‡ç¯å¢ƒå˜é‡æˆ– `.env` æ–‡ä»¶é…ç½®ã€‚
- **é€šç”¨ä»£ç†**: æ™ºèƒ½åŒºåˆ†æµå¼ä¸éæµå¼è¯·æ±‚ï¼Œå®Œç¾å…¼å®¹å¦‚â€œæ ‡é¢˜ç”Ÿæˆâ€ç­‰ä¸€æ¬¡æ€§JSONå“åº”åŠŸèƒ½ã€‚
- **DockeråŒ–**: æä¾› Dockerfileï¼Œä¸€é”®æ„å»ºå’Œéƒ¨ç½²ï¼Œä¸å®¿ä¸»ç¯å¢ƒå®Œå…¨è§£è€¦ã€‚
- **è½»é‡é«˜æ•ˆ**: åŸºäº Node.js å’Œ Expressï¼Œèµ„æºå ç”¨ä½ï¼Œå¹¶å‘æ€§èƒ½å¼ºã€‚

## âš™ï¸ é…ç½®

æœ¬é¡¹ç›®é€šè¿‡ **`.env`** æ–‡ä»¶è¿›è¡Œé…ç½®ï¼Œæ–¹ä¾¿ä¸”å®‰å…¨ã€‚æ‰€æœ‰å¯ç”¨çš„é…ç½®é¡¹éƒ½å·²åœ¨ **`.env.example`** æ–‡ä»¶ä¸­åˆ—å‡ºå¹¶é™„æœ‰è¯´æ˜ã€‚

| ç¯å¢ƒå˜é‡                      | æè¿°                               | é»˜è®¤å€¼   |
| ----------------------------- | ---------------------------------- | -------- |
| `UPSTREAM_API_URL`            | **å¿…éœ€ï¼** æ‚¨çš„ä¸Šæ¸¸APIåœ°å€ã€‚     | (æ— )     |
| `PORT`                        | ç½‘å…³ç›‘å¬çš„ç«¯å£ã€‚                   | `3001`   |
| `LOG_LEVEL`                   | æ—¥å¿—çº§åˆ« (`debug` æˆ– `silent`)ã€‚   | `silent` |
| `STREAM_MIN_DELAY`            | æµå¼è¾“å‡ºçš„æœ€å°å»¶è¿Ÿï¼ˆç§’ï¼‰ã€‚         | `0.016`  |
| `STREAM_MAX_DELAY`            | æµå¼è¾“å‡ºçš„æœ€å¤§å»¶è¿Ÿï¼ˆç§’ï¼‰ã€‚         | `0.024`  |
| `STREAM_SHORT_TEXT_THRESHOLD` | çŸ­æ–‡æœ¬é˜ˆå€¼ï¼ˆå­—ç¬¦ï¼‰ã€‚               | `10`     |
| `STREAM_LONG_TEXT_THRESHOLD`  | é•¿æ–‡æœ¬é˜ˆå€¼ï¼ˆå­—ç¬¦ï¼‰ã€‚               | `50`     |
| `STREAM_CHUNK_SIZE`           | é•¿æ–‡æœ¬åˆ†å—å¤§å°ï¼ˆå­—ç¬¦ï¼‰ã€‚           | `5`      |

## ğŸš€ å¿«é€Ÿå¼€å§‹ (æ¨è)

æˆ‘ä»¬æ¨èä½¿ç”¨æœ€æ–°çš„ç¨³å®š Release ç‰ˆæœ¬è¿›è¡Œéƒ¨ç½²ã€‚ä»¥ä¸‹å‘½ä»¤å°†è‡ªåŠ¨ä¸‹è½½å¹¶è§£å‹æœ€æ–°ç‰ˆæºç ã€‚

**å‰æ**: æ‚¨çš„ç³»ç»Ÿå·²å®‰è£… `curl` æˆ– `wget`ã€‚

1.  **ä¸€é”®ä¸‹è½½å¹¶è§£å‹**

    é€‰æ‹©ä»¥ä¸‹ä»»ä¸€å‘½ä»¤æ‰§è¡Œå³å¯ã€‚å®ƒä¼šè‡ªåŠ¨ä¸‹è½½ **v1.0** ç‰ˆæœ¬å¹¶è§£å‹ã€‚
    > **æç¤º**: å½“é¡¹ç›®å‘å¸ƒæ–°ç‰ˆæœ¬æ—¶ï¼Œåªéœ€ä¿®æ”¹å‘½ä»¤ä¸­çš„ç‰ˆæœ¬å·å³å¯ä¸‹è½½æ–°ç‰ˆï¼Œæ¯å½“åœ¨æ¨é€å‘è¡Œç‰ˆæ—¶ï¼Œæˆ‘éƒ½ä¼šé¡ºå¸¦åœ°åœ¨è¿™é‡ŒæŠŠç‰ˆæœ¬å·æ”¹ä¸ºæœ€æ–°çš„ï¼Œå½“ç„¶æœ‰æ—¶å€™å¯èƒ½ä¼šå¿˜è®°ï¼Œè¯¸ä½å°±è‡ªè¡Œä¿®æ”¹å§ï¼ˆï¼‰

    *   **ä½¿ç”¨ `curl` (æ¨èï¼ŒmacOS å’Œå¤šæ•° Linux è‡ªå¸¦):**
        ```bash
        curl -L https://github.com/2erTwo6/Smooth-Gateway/archive/refs/tags/v1.0.tar.gz | tar -xz
        ```
    *   **æˆ–è€…ä½¿ç”¨ `wget`:**
        ```bash
        wget -qO- https://github.com/2erTwo6/Smooth-Gateway/archive/refs/tags/v1.0.tar.gz | tar -xz
        ```

2.  **è¿›å…¥ç›®å½•å¹¶é…ç½®**

    ä¸Šä¸€æ­¥çš„å‘½ä»¤ä¼šè§£å‹å‡ºä¸€ä¸ªåä¸º `Smooth-Gateway-1.0` çš„æ–‡ä»¶å¤¹ã€‚
    ```bash
    # æ³¨æ„ï¼æ–‡ä»¶å¤¹ååŒ…å«ç‰ˆæœ¬å·ï¼Œè¯·æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹
    cd Smooth-Gateway-1.0

    # å¤åˆ¶é…ç½®æ–‡ä»¶
    cp .env.example .env
    ```
    ç„¶åä½¿ç”¨æ‚¨å–œæ¬¢çš„ç¼–è¾‘å™¨ï¼ˆå¦‚ `nano` æˆ– `vim`ï¼‰æ‰“å¼€ `.env` æ–‡ä»¶ï¼Œå¹¶è‡³å°‘å¡«å…¥å¿…éœ€çš„ `UPSTREAM_API_URL`ã€‚

3.  **æ„å»ºå¹¶è¿è¡Œ Docker å®¹å™¨**

    ```bash
    # æ„å»ºé•œåƒ
    docker build -t smooth-gateway .

    # è¿è¡Œå®¹å™¨
    docker run -d \
      --name my-smooth-gateway \
      -p 3001:3001 \
      --env-file .env \
      --restart unless-stopped \
      smooth-gateway
    ```
    å®Œæˆï¼æ‚¨çš„æµå¼ä¼˜åŒ–ç½‘å…³å·²åœ¨ `http://localhost:3001` ä¸Šè¿è¡Œã€‚

## ğŸ‘¨â€ğŸ’» å¼€å‘è€…/è´¡çŒ®è€…

å¦‚æœæ‚¨å¸Œæœ›è´¡çŒ®ä»£ç ï¼Œæˆ–è€…æƒ³ä½“éªŒæœ€æ–°çš„ã€å°šæœªæ­£å¼å‘å¸ƒçš„åŠŸèƒ½ï¼Œè¯·ä½¿ç”¨ `git` å…‹éš†ä»“åº“çš„ `main` åˆ†æ”¯ã€‚

```bash
git clone https://github.com/2erTwo6/Smooth-Gateway.git
cd Smooth-Gateway
# åç»­é…ç½®å’Œæ„å»ºæ­¥éª¤åŒä¸Š
```

## ğŸ™ è‡´è°¢

æœ¬é¡¹ç›®çš„æ ¸å¿ƒæ€æƒ³å—åˆ°äº† [snailyp/gemini-balance](https://github.com/snailyp/gemini-balance) é¡¹ç›®çš„å¯å‘ï¼Œåœ¨æ­¤å‘åŸä½œè€…è¡¨ç¤ºæ„Ÿè°¢ï¼

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT](LICENSE) è®¸å¯è¯ã€‚
